<script>
    function onRequestEnd(e) {
        if (e.type == "update" || e.type == "create" || e.type == "remove") {
            $("#AttorneyGrid").data("kendoGrid").dataSource.read();
        }
    }

    function onEdit(e) {
    }
</script>
@(Html.Kendo().Grid<AttorneyVM>()
          .Name("AttorneyGrid")
          .Columns(columns =>
          {
              columns.Command(command => { command.Edit().Text(" ").CancelText(" ").UpdateText(" "); command.Destroy().Text(" "); }).Width(100);
              columns.Bound(c => c.AttorneyId).Visible(false);
              columns.Bound(c => c.UserName).Width(120);
              columns.Bound(c => c.LastName);
              columns.Bound(c => c.FirstName);
              columns.Bound(c => c.DisplayName);
              columns.Bound(c => c.Active)
                .ClientTemplate("<span> #= Active ? value='Active': 'Inactive' # </span>")
                .EditorTemplateName("Active")
                .Width(150)
                .Title("Status");
              columns.Template(@<text> </text>).Title("");
          })
          .Scrollable()
          .DataSource(dataSource => dataSource
              .Ajax()
              .Model(m => {
                  m.Id(c => c.AttorneyId);
                  m.Field(c => c.UserId).DefaultValue(Guid.NewGuid());
              })
              .Read(read => read.Action("Read", "Attorneys"))
              .Destroy(destroy => destroy.Action("Destroy", "Attorneys"))
              .Update(update => update.Action("Update", "Attorneys"))
              .Create(create => create.Action("Create", "Attorneys"))
              .Events(events => events.RequestEnd("onRequestEnd"))
          )
          .ToolBar(toolbar => { toolbar.Create().Text("Add"); })
          .Editable(editable => editable.Mode(GridEditMode.InLine))
          .Events(e => e.Edit("onEdit"))
)
